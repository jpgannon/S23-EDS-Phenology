library(shiny); runApp('WORKING_PROJECT_CODE.R')
library(shiny); runApp('WORKING_PROJECT_CODE.R')
shiny::runApp()
# VT'23 EDS PHENOLOGY APP
#THIS SECTION IS THE SETUP, IT DOWNLOADS ALL THE NECESSARY LIBRARIES AND THE DATA CAN BE IMPORTED WITH THE NPN DOWNLOAD PACKAGE
#OR VIA A CSV STORED ON A PERSONAL DEVICE
knitr::opts_chunk$set(echo = TRUE)
library(shiny)
library(shinydashboard)
library(markdown)
library(rmarkdown)
library(rnpn)
library(dplyr)
library(lubridate)
library(styler)
library(ggplot2)
library(bslib)
library(thematic)
library(ragg)
library(showtext)
library(tidyverse)
library(rsconnect)
rm(list = ls())
setwd("C:/Users/Sean/Documents/S23-EDS-Phenology_v1/app")
cdf <- read.csv("www/data/cdf.csv")
setwd("C:/Users/Sean/Documents/S23-EDS-Phenology/app")
cdf = cdf %>%
dplyr::mutate(
year = lubridate::year(observation_date),
month = lubridate::month(observation_date),
day = lubridate::day(observation_date)
)
cdf$elev_bands <-
cut(cdf$elevation_in_meters,
c(-Inf, 800, 1300, Inf),
c("<800m", "800-1300m", ">1300m"))
knitr::opts_chunk$set(echo = TRUE)
library(shiny)
library(shinydashboard)
library(markdown)
library(rmarkdown)
library(rnpn)
library(dplyr)
library(lubridate)
library(styler)
library(ggplot2)
library(bslib)
library(thematic)
library(ragg)
library(showtext)
library(tidyverse)
library(rsconnect)
rm(list = ls())
setwd("C:/Users/Sean/Documents/S23-EDS-Phenology_v1/app")
cdf <- read.csv("www/data/cdf.csv")
setwd("C:/Users/Sean/Documents/S23-EDS-Phenology/app")
# cdf <- npn_download_status_data(
#   request_source = 'VT23 EDS APP DEMO',
#   network_ids = c(72),
#   years = c(2010:2020),
#   species_ids = c(3, 98, 61, 82, 1187, 97, 1172, 823, 100, 79, 1189),
#   additional_fields = c("Site_Name", "Network_Name", "Phenophase_Category"),
#   climate_data = TRUE)
cdf = cdf %>%
dplyr::mutate(
year = lubridate::year(observation_date),
month = lubridate::month(observation_date),
day = lubridate::day(observation_date)
)
cdf$elev_bands <-
cut(cdf$elevation_in_meters,
c(-Inf, 800, 1300, Inf),
c("<800m", "800-1300m", ">1300m"))
icdf <- subset(
cdf,
intensity_value == '95% or more' &
phenophase_description == 'Leaves',
select = c(
species, species_id, phenophase_id, common_name, phenophase_description,
intensity_value, site_name, elevation_in_meters, elev_bands, tmin_winter,
tmin_spring, tmax_winter, tmax_spring, daylength, individual_id, year, day_of_year
)
)
icdf2 <- icdf %>%
group_by(year, individual_id, common_name) %>%
filter(day_of_year == min(day_of_year))
icdf3 <- icdf %>%
group_by(year, common_name) %>%
filter(day_of_year == min(day_of_year))
cdf1 <- subset(
cdf,
phenophase_status == 1,
select = c(
species_id, phenophase_id, common_name,
phenophase_description, site_name, elevation_in_meters, elev_bands,
tmin_winter,tmin_spring, tmax_winter, tmax_spring,
daylength, individual_id, year, day_of_year
)
)
cdfa <- subset(
cdf,
phenophase_status == 1 | phenophase_status == 0,
select = c(
common_name,phenophase_description,phenophase_status,
elev_bands,year,day_of_year
)
)
cdfa$y <- cut(cdfa$phenophase_status, breaks = 2)
cdf2 <- cdf1 %>%
group_by(year, individual_id, common_name, phenophase_description) %>%
filter(day_of_year == min(day_of_year))
cdf3 <- cdf1 %>%
group_by(year, individual_id, common_name) %>%
filter(day_of_year == min(day_of_year))
write.csv(x = cdfa, file = "cdfa.csv", row.names = FALSE)
View(cdfa)
write.csv(x = cdf2, file = "cdf2.csv", row.names = FALSE)
write.csv(x = icdf2, file = "icdf2.csv", row.names = FALSE)
write.csv(x = tminspring, file = "tminspring.csv", row.names = FALSE)
####
tminspring <- cdf2 %>%
group_by(year, individual_id, common_name, phenophase_description) %>%
filter(day_of_year == min(day_of_year),
phenophase_description == "Leaves")
write.csv(x = tminspring, file = "tminspring.csv", row.names = FALSE)
